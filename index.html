<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>여수 2박 3일 힐링 여행</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: 'Pretendard', sans-serif;
        background-color: #ffffff;
        color: #333;
      }
      .hero-bg {
        position: relative;
        height: 100vh;
        min-height: 400px;
        background-color: #eee;
        overflow: hidden;
        transition: height 0.1s ease-out;
        will-change: height;
      }
      .hero-bg.scrolled {
        height: 50vh;
      }
      .hero-bg img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center 40%;
        filter: brightness(0.8);
        transition: transform 0.1s ease-out;
      }
      .scroll-hint {
        transition: opacity 0.3s ease-out;
      }
      .timeline-dot {
        width: 10px;
        height: 10px;
        background: #333;
        border-radius: 50%;
        position: absolute;
        left: -5px;
        top: 6px;
      }
      .day-tab.active {
        border-bottom: 2px solid #111;
        color: #111;
        font-weight: 700;
      }
      .highlight-box {
        background: #f8fafc;
        border-left: 3px solid #3b82f6;
        padding: 1rem;
        border-radius: 0 0.75rem 0.75rem 0;
      }
      .map-day-tab.active {
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
      }
      #routeMapModal.show {
        display: block;
        animation: fadeIn 0.3s ease-out;
      }
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes fadeInUp {
        from { 
          opacity: 0; 
          transform: translateY(20px);
        }
        to { 
          opacity: 1; 
          transform: translateY(0);
        }
      }
      #routeMapModal.show > div:last-child {
        animation: fadeInUp 0.3s ease-out;
      }
    </style>
  </head>
  <body class="pb-20">
    <!-- Hero Section: 사용자 업로드 사진 적용 -->
    <header
      class="hero-bg flex flex-col items-center justify-end text-white text-center pb-12"
    >
      <div class="absolute inset-0 z-0">
        <!-- 사용자가 업로드한 하이마레 사진 데이터 유지 -->
        <img
          src="public/banner.jpg"
          alt="여수 배경"
        />
        <div
          class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"
        ></div>
      </div>

      <div class="relative z-10 transition-all duration-100 ease-out hero-content">
        <p
          class="text-xs tracking-[0.3em] mb-2 uppercase font-medium opacity-80"
        >
          Winter Healing Journey
        </p>
        <h1
          class="text-4xl md:text-5xl font-bold mb-2 tracking-tight text-white"
        >
          여수 2박 3일 여행
        </h1>
        <p class="text-sm opacity-90 font-light text-blue-100">
          2026.01.02 - 01.04
        </p>
      </div>
      
      <!-- 스크롤 힌트 -->
      <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-10 scroll-hint">
        <div class="w-6 h-10 border-2 border-white/50 rounded-full flex justify-center pt-2">
          <div class="w-1 h-2 bg-white/70 rounded-full animate-bounce"></div>
        </div>
      </div>
    </header>

    <main class="max-w-xl mx-auto px-6 mt-10">
      <!-- Summary Info -->
      <div
        class="mb-10 flex justify-between items-center border-y py-6 border-gray-100"
      >
        <div class="text-center flex-1 border-r border-gray-100">
          <p class="text-[10px] text-gray-400 uppercase tracking-widest mb-1">
            Bus Schedule
          </p>
          <p class="font-medium text-sm">1.2(금) 13:40 출발</p>
          <p class="text-[11px] text-gray-500 font-light italic">
            서울 센트럴 → 여수
          </p>
        </div>
        <div class="text-center flex-1">
          <p class="text-[10px] text-gray-400 uppercase tracking-widest mb-1">
            Style
          </p>
          <p class="font-medium text-sm">뚜벅이 커플 투어</p>
          <p class="text-[11px] text-gray-500 font-light italic">
            오션뷰 & 로컬 미식
          </p>
        </div>
      </div>

      <!-- Tabs -->
      <div class="flex justify-around mb-6 sticky top-0 bg-white/95 z-20 py-4">
        <button
          onclick="showDay(1)"
          id="tab1"
          class="day-tab active px-4 py-1 text-sm text-gray-400"
        >
          DAY 1
        </button>
        <button
          onclick="showDay(2)"
          id="tab2"
          class="day-tab px-4 py-1 text-sm text-gray-400"
        >
          DAY 2
        </button>
        <button
          onclick="showDay(3)"
          id="tab3"
          class="day-tab px-4 py-1 text-sm text-gray-400"
        >
          DAY 3
        </button>
      </div>

      <!-- 동선보기 버튼 -->
      <div class="flex justify-center mb-8">
        <button
          onclick="toggleRouteMap()"
          id="routeMapBtn"
          class="flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-medium rounded-full shadow-lg hover:shadow-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
          </svg>
          동선보기
        </button>
      </div>

      <!-- 지도 모달 -->
      <div id="routeMapModal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="toggleRouteMap()"></div>
        <div class="absolute inset-4 md:inset-10 bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col">
          <!-- 모달 헤더 -->
          <div class="flex items-center justify-between px-5 py-4 border-b border-gray-100">
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
              </div>
              <h3 class="font-bold text-lg">여행 동선</h3>
            </div>
            <button onclick="toggleRouteMap()" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          
          <!-- 요일 선택 탭 -->
          <div class="flex justify-center gap-2 px-5 py-3 bg-gray-50 border-b border-gray-100">
            <button onclick="showMapDay(1)" id="mapTab1" class="map-day-tab active px-4 py-2 text-sm rounded-full bg-blue-500 text-white font-medium transition-all">DAY 1</button>
            <button onclick="showMapDay(2)" id="mapTab2" class="map-day-tab px-4 py-2 text-sm rounded-full bg-gray-200 text-gray-600 font-medium transition-all hover:bg-gray-300">DAY 2</button>
            <button onclick="showMapDay(3)" id="mapTab3" class="map-day-tab px-4 py-2 text-sm rounded-full bg-gray-200 text-gray-600 font-medium transition-all hover:bg-gray-300">DAY 3</button>
          </div>
          
          <!-- 지도 영역 -->
          <div class="flex-1 relative">
            <div id="map" class="w-full h-full"></div>
          </div>
          
          <!-- 범례 -->
          <div class="px-5 py-3 bg-gray-50 border-t border-gray-100">
            <div class="flex items-center justify-center gap-6 text-xs text-gray-500">
              <div class="flex items-center gap-2">
                <div class="w-3 h-3 rounded-full bg-blue-500"></div>
                <span>여행지</span>
              </div>
              <div class="flex items-center gap-2">
                <div class="w-8 border-t-2 border-dashed border-blue-400"></div>
                <span>이동 경로</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Day 1 -->
      <section id="day1" class="day-content">
        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1">서울 센트럴시티 출발</h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">13:40 - 18:00</p>
          <p class="text-sm text-gray-600 leading-relaxed">
            고속버스를 타고 여수로 이동. 도착 시간에 맞춰 노을을 감상하며 여수
            터미널에 도착합니다.
          </p>
        </div>

        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1">체크인 후 밤바다 산책</h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">18:30</p>
          <p class="text-sm text-gray-600 leading-relaxed">
            숙소에 짐을 풀고 첫날의 설렘을 느끼러 밖으로 나갑니다.
          </p>
        </div>

        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1 text-blue-600 font-bold">
            저녁: 돌문어 삼합 & 잎새주
          </h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">20:00</p>
          <p class="text-sm text-gray-600 leading-relaxed">
            여수 낭만포차 거리 혹은 근처 식당에서 돌문어, 전복, 갓김치가
            어우러진 삼합으로 여행 첫 식사를 즐겨보세요.
          </p>
        </div>
      </section>

      <!-- Day 2: 일찍 시작 & 일정 추가 -->
      <section id="day2" class="day-content hidden">
        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1 text-blue-500">
            모닝 산책: 고소동 벽화마을
          </h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">09:00 - 10:30</p>
          <p class="text-sm text-gray-600 leading-relaxed">
            사람이 붐비기 전 아침 공기를 마시며 벽화마을을 걷습니다. 높은 곳에서
            내려다보는 여수항의 평화로운 아침 전경이 일품입니다.
          </p>
        </div>

        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1">오션뷰 카페 '하이마레'</h4>
          <p class="text-xs text-blue-500 font-bold mb-3 font-mono">
            10:30 - 12:30
          </p>
          <div class="highlight-box">
            <p class="text-sm text-gray-700 leading-relaxed">
              배너 사진 속의 그 장소. 통창 너머로 반짝이는 윤슬을 보며 2시간
              동안 여유로운 대화를 즐기세요. (커플 사진 명당)
            </p>
          </div>
        </div>

        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1 text-red-500">
            점심: 서대회무침 or 갯장어
          </h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">12:30 - 13:30</p>
          <p class="text-sm text-gray-600 leading-relaxed font-semibold">
            새콤달콤한 서대회무침에 밥을 비벼 먹거나, 겨울철 뜨끈한 샤브샤브로
            기력을 보충하세요.
          </p>
        </div>

        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1">아르떼뮤지엄 여수</h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">14:00 - 16:30</p>
          <p class="text-sm text-gray-600 leading-relaxed">
            몰입형 미디어 아트를 경험할 수 있는 공간. 빛과 음악이 어우러진 환상적인
            전시를 감상하며 특별한 추억을 남겨보세요.
          </p>
        </div>

        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1 text-blue-600">
            저녁: 자연산 활어회 & 하모
          </h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">18:30</p>
          <p class="text-sm text-gray-600 leading-relaxed font-semibold">
            여수 바다를 한 상 가득 차려낸 횟집에서 싱싱한 해산물과 함께 하루를
            마무리하세요.
          </p>
        </div>
      </section>

      <!-- Day 3 -->
      <section id="day3" class="day-content hidden">
        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1">오동도 동백 숲길</h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">10:00</p>
          <p class="text-sm text-gray-600 leading-relaxed">
            산책로를 따라 걷다 만나는 등대와 탁 트인 남해 바다. 1월의 동백꽃을
            기대해 볼 수 있는 시간입니다.
          </p>
        </div>

        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1 text-red-500">
            마지막 점심: 여수 게장 백반
          </h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">12:30</p>
          <p class="text-sm text-gray-600 leading-relaxed">
            간장게장과 양념게장, 그리고 갓김치 한 상. 여수 여행의 정점을 찍는
            밥도둑 식사입니다.
          </p>
        </div>

        <div class="relative border-l border-gray-200 pl-8 pb-10 ml-1">
          <div class="timeline-dot"></div>
          <h4 class="font-bold text-lg mb-1 text-gray-400">
            여행 마무리 및 터미널 이동
          </h4>
          <p class="text-xs text-gray-400 mb-3 font-mono">14:30</p>
          <p class="text-sm text-gray-600 leading-relaxed">
            이순신광장 근처에서 딸기모찌나 거북선빵 등 기념품을 사고 서울행
            버스에 탑승합니다.
          </p>
        </div>
      </section>

      <!-- Tips Section -->
      <div class="mt-12 p-6 bg-gray-50 rounded-2xl border border-gray-100">
        <h5
          class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 italic"
        >
          Transportation Tip
        </h5>
        <p class="text-xs text-gray-600 leading-relaxed">
          여수는 주요 관광지들이 모여있어 택시 이동이 매우 편리합니다. 2일차
          아르떼뮤지엄 이동 외에는 대부분 기본요금 거리이니 체력을 아껴보세요.
        </p>
      </div>
    </main>

    <footer class="mt-20 py-10 text-center border-t border-gray-50">
      <p class="text-[10px] text-gray-300 tracking-[0.4em] uppercase">
        Healing Yeosu Memories
      </p>
    </footer>

    <script>
      function showDay(dayNum) {
        document
          .querySelectorAll('.day-content')
          .forEach((el) => el.classList.add('hidden'))
        document
          .querySelectorAll('.day-tab')
          .forEach((el) => el.classList.remove('active'))
        document.getElementById('day' + dayNum).classList.remove('hidden')
        document.getElementById('tab' + dayNum).classList.add('active')

        window.scrollTo({
          top: document.querySelector('header').offsetHeight - 80,
          behavior: 'smooth',
        })
      }

      // 여행지 좌표 데이터
      const travelData = {
        day1: [
          { name: '서울 센트럴시티', lat: 37.505632, lng: 127.003178, time: '13:40 출발' },
          { name: '여수종합버스터미널', lat: 34.758195, lng: 127.716834, time: '18:00 도착' },
          { name: '숙소 체크인', lat: 34.7455, lng: 127.7395, time: '18:30' },
          { name: '낭만포차 거리', lat: 34.736532, lng: 127.749332, time: '20:00' }
        ],
        day2: [
          { name: '고소동 벽화마을', lat: 34.739165, lng: 127.741167, time: '09:00' },
          { name: '하이마레 카페', lat: 34.737587, lng: 127.742245, time: '10:30' },
          { name: '서대회 식당', lat: 34.7400, lng: 127.7420, time: '12:30' },
          { name: '아르떼뮤지엄 여수', lat: 34.751292, lng: 127.745509, time: '14:00' },
          { name: '횟집', lat: 34.7460, lng: 127.7405, time: '18:30' }
        ],
        day3: [
          { name: '오동도', lat: 34.745190, lng: 127.766386, time: '10:00' },
          { name: '게장백반 식당', lat: 34.7440, lng: 127.7400, time: '12:30' },
          { name: '이순신광장', lat: 34.7438, lng: 127.7425, time: '14:00' },
          { name: '여수종합버스터미널', lat: 34.7479, lng: 127.6524, time: '14:30' }
        ]
      };

      let map = null;
      let markers = [];
      let polyline = null;
      let currentMapDay = 1;

      function toggleRouteMap() {
        const modal = document.getElementById('routeMapModal');
        if (modal.classList.contains('show')) {
          modal.classList.remove('show');
          modal.classList.add('hidden');
          document.body.style.overflow = '';
        } else {
          modal.classList.remove('hidden');
          modal.classList.add('show');
          document.body.style.overflow = 'hidden';
          
          // 지도 초기화 (처음 열 때만)
          setTimeout(() => {
            if (!map) {
              initMap();
            } else {
              map.invalidateSize();
            }
            // 현재 선택된 탭의 요일 표시
            const activeTab = document.querySelector('.day-tab.active');
            const dayNum = parseInt(activeTab.id.replace('tab', ''));
            showMapDay(dayNum);
          }, 100);
        }
      }

      function initMap() {
        // 여수 중심 좌표
        map = L.map('map').setView([34.7400, 127.7400], 13);
        
        // OpenStreetMap 타일 레이어 추가
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
          maxZoom: 18
        }).addTo(map);
      }

      // 커스텀 숫자 마커 아이콘 생성
      function createNumberIcon(number) {
        return L.divIcon({
          className: 'custom-marker',
          html: `
            <div style="position: relative;">
              <div style="
                width: 32px;
                height: 32px;
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
                font-size: 14px;
                box-shadow: 0 2px 8px rgba(59, 130, 246, 0.5);
                border: 2px solid white;
                font-family: 'Pretendard', sans-serif;
              ">${number}</div>
            </div>
          `,
          iconSize: [32, 32],
          iconAnchor: [16, 16],
          popupAnchor: [0, -20]
        });
      }

      function showMapDay(dayNum) {
        currentMapDay = dayNum;
        
        // 탭 스타일 업데이트
        document.querySelectorAll('.map-day-tab').forEach((tab, idx) => {
          if (idx + 1 === dayNum) {
            tab.classList.add('active');
            tab.classList.remove('bg-gray-200', 'text-gray-600');
          } else {
            tab.classList.remove('active');
            tab.classList.add('bg-gray-200', 'text-gray-600');
          }
        });

        // 기존 마커와 폴리라인 제거
        clearMapElements();

        // 해당 요일 데이터 가져오기
        const dayData = travelData['day' + dayNum];
        
        // 마커 및 경로 생성
        const pathCoords = [];
        dayData.forEach((location, index) => {
          pathCoords.push([location.lat, location.lng]);

          // 커스텀 마커 생성
          const marker = L.marker([location.lat, location.lng], {
            icon: createNumberIcon(index + 1)
          }).addTo(map);
          
          // 팝업 추가
          marker.bindPopup(`
            <div style="font-family: 'Pretendard', sans-serif; padding: 4px;">
              <div style="font-weight: 600; font-size: 14px; color: #333;">${location.name}</div>
              <div style="font-size: 12px; color: #666; margin-top: 2px;">${location.time}</div>
            </div>
          `);
          
          markers.push(marker);
        });

        // 점선 경로 그리기
        polyline = L.polyline(pathCoords, {
          color: '#3b82f6',
          weight: 3,
          opacity: 0.8,
          dashArray: '10, 10',
          lineCap: 'round',
          lineJoin: 'round'
        }).addTo(map);

        // 경로에 맞게 지도 범위 조정
        if (pathCoords.length > 0) {
          const bounds = L.latLngBounds(pathCoords);
          map.fitBounds(bounds, { padding: [50, 50] });
        }
      }

      function clearMapElements() {
        markers.forEach(marker => map.removeLayer(marker));
        markers = [];
        if (polyline) {
          map.removeLayer(polyline);
          polyline = null;
        }
      }

      // Hero 배경 스크롤 축소 효과
      (function() {
        const hero = document.querySelector('.hero-bg');
        const heroContent = hero.querySelector('.hero-content');
        const scrollHint = hero.querySelector('.scroll-hint');
        const maxScroll = window.innerHeight * 0.5; // 스크롤 전환 구간
        
        let ticking = false;
        
        function updateHero() {
          const scrollY = window.scrollY;
          const progress = Math.min(scrollY / maxScroll, 1);
          
          // 100vh에서 50vh로 자연스럽게 축소
          const newHeight = 100 - (progress * 50);
          hero.style.height = newHeight + 'vh';
          
          // 컨텐츠 살짝 위로 이동하며 페이드 효과
          const opacity = 1 - (progress * 0.3);
          const translateY = progress * -20;
          heroContent.style.opacity = opacity;
          heroContent.style.transform = `translateY(${translateY}px)`;
          
          // 스크롤 힌트 빠르게 사라지기
          if (scrollHint) {
            const hintOpacity = Math.max(0, 1 - (scrollY / 100));
            scrollHint.style.opacity = hintOpacity;
          }
          
          ticking = false;
        }
        
        window.addEventListener('scroll', function() {
          if (!ticking) {
            requestAnimationFrame(updateHero);
            ticking = true;
          }
        });
        
        // 초기 상태 설정
        updateHero();
      })();
    </script>
  </body>
</html>
